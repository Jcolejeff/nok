---
import { CollectionEntry, getCollection } from "astro:content";
import { cn, url } from "lib/utils";

import TextFormat from "lib/helpers/TextFormat";

import Layout from "layouts/Layout.astro";

const resources = await getCollection("services");
export async function getStaticPaths() {
	const servicesList = await getCollection("services");
	return servicesList?.map((entry) => ({
		params: { slug: entry?.slug },
		props: { entry },
	}));
}

export const prerender = true;

interface Props {
	entry: CollectionEntry<"services">;
}

const { entry } = Astro.props;

const resource = entry.data;
---

<Layout darkNavBg withoutWhatBusinessSay title={`${resource.heroTitle} - Timbu`} withoutFAQ>
	<main
		class="container relative flex w-full max-w-[1700px] flex-col gap-16 overflow-x-hidden bg-white px-container-base py-8 md:py-24 lg:px-container-lg xl:px-container-xl"
	>
		<div class="my-[1.125rem] grid gap-[5rem] md:grid-cols-[3.5fr_1fr]">
			<section class="flex flex-col gap-16 pb-8 md:pb-24">
				<!-- desktop screen picture -->
				<section class="space-y-5 text-center">
					<h1
						class="text-[1.3rem] font-[700] tracking-[0.0125rem] text-secondary-2 md:text-center md:text-[2.5rem] md:leading-[3.5rem]"
					>
						<TextFormat
							keywordClassName="text-primary-1"
							text={resource.heroTitle}
							keyword={"tool"}
						/>
					</h1>
					<p class="text-sm md:text-lg">
						6th Dec 2023 {"    "} | <span class="font-bold"> 10 min read</span>
					</p>
				</section>
				<img src={url(resource.image)} alt="" class="w-full" />
				<!-- info grid icon cards sections -->
				<section class="rounded-lg">
					<div>
						<p
							class="mb-8 text-[1.18rem] font-[500] leading-[2.5rem] text-opacity-[0.8] md:text-[1.54rem] md:leading-[3rem] xxl:text-[1.58rem]"
						>
							{resource.description}
						</p>
						<section class="grid gap-[1rem] rounded-lg md:grid-cols-[1fr]">
							{
								resource.sections.map((item: any, index: number) => {
									return (
										<article class=" flex flex-col items-start  justify-between gap-12  rounded-2xl py-4">
											<div class="flex flex-col gap-4  ">
												<h3 class="text-[1.18rem]  font-semibold md:text-[1.54rem] xxl:text-[1.58rem]">
													<span class="mr-3">{index + 1}.</span> {item.heading}
												</h3>
												<p class="text-[1rem] leading-[2.4rem] md:text-[1.54rem] md:leading-[3rem] xxl:text-[1.58rem]">
													{item.paragraph}
												</p>
											</div>
										</article>
									);
								})
							}
						</section>
					</div>
				</section>
				<p
					class="mb-8 text-[1.18rem] font-[500] leading-[2.5rem] text-opacity-[0.8] md:text-[1.54rem] md:leading-[3rem] xxl:text-[1.58rem]"
				>
					{resource.conclusion}
				</p>
				<div class="mb-8 flex justify-center gap-4 md:mb-0 md:justify-start">
					<a
						href={resource.link ? resource.link : `${import.meta.env.VITE_APP_URL}/signup`}
						class={cn(
							"md:w-fit px-12  py-2  justify-center items-center rounded-md bg-primary-1 shadow-1 hover:opacity-90 active:opacity-100 transition-opacity duration-300 ease-in-out flex md:px-16 ",
						)}
					>
						<span class="font-[500] leading-[1.5rem] tracking-[0.02875rem] text-white">
							Get Started
						</span>
					</a>
					<a
						href={url("request-demo")}
						class={cn(
							"md:w-fit px-6  py-2  justify-center items-center rounded-md border-primary-1 border  hover:opacity-90 active:opacity-100 transition-opacity duration-300 ease-in-out flex md:px-12 ",
						)}
					>
						<span class="font-[500] leading-[1.5rem] tracking-[0.02875rem]">
							Request a Demo
						</span>
					</a>
				</div>
				<div
					class="mb-[1.5rem] mt-[8rem] flex items-center justify-start gap-[0.57rem] text-2xl font-bold"
				>
					<span class="leading-[28px] tracking-[0.15px]">Similar Articles</span>
				</div>
			</section>

			<div class="hidden w-full md:block">
				<div class="w-full">
					<h3 class="mb-8 text-2xl font-bold">Recommended</h3>
					<div class="grid grid-cols-1 gap-x-[1.375rem] gap-y-[0.69rem]">
						{
							resources?.map((i: any, idx: number) => (
								<a
									href={url(`resources/${i?.slug}`)}
									class="flex h-full w-full flex-col gap-2 border-b pb-6"
								>
									<p class="font-bold ">{i?.data?.heroTitle}</p>
									<div class="flex justify-between">
										<p class="text-sm font-extralight">Dec 10</p>
										<p class="text-sm font-extralight">15 mins read</p>
									</div>
									<p class="text-sm font-bold opacity-60">{i?.data?.productName}</p>
								</a>
							))
						}
					</div>
				</div>
			</div>
		</div>
	</main>
</Layout>
